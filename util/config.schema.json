{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Config",
  "type": "object",
  "properties": {
    "tasks": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/Task"
      }
    },
    "webhook": {
      "type": "string",
      "description": "webhook url to recieve notifications"
    }
  },
  "required": [
    "tasks"
  ],
  "definitions": {
    "Task": {
      "type": "object",
      "properties": {
        "cmd": {
          "type": "string",
          "description": "The command to use to launch the program."
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Arguments to give to the command."
        },
        "numprocs": {
          "type": "integer",
          "description": "The number of processes to start and keep running."
        },
        "umask": {
          "type": "integer",
          "description": "An umask to set before launching the program."
        },
        "workingdir": {
          "type": "string",
          "description": "A working directory to set before launching the program."
        },
        "autostart": {
          "type": "boolean",
          "description": "Whether to start this program at launch or not."
        },
        "autorestart": {
          "type": "string",
          "description": "Whether the program should be restarted always, never, or on unexpected exits only.",
          "enum": [
            "always",
            "never",
            "unexpected"
          ]
        },
        "exitcodes": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "default": [
            0
          ],
          "description": "Which return codes represent an 'expected' exit status."
        },
        "startretries": {
          "type": "integer",
          "default": 3,
          "description": "How many times a restart should be attempted before aborting."
        },
        "starttime": {
          "type": "string",
          "description": "How long the program should be running after it's started for it to be considered 'successfully started'.",
          "format": "duration"
        },
        "stopsignal": {
          "type": "string",
          "description": "Which signal should be used to stop (i.e., exit gracefully) the program."
        },
        "stoptime": {
          "type": "string",
          "description": "How long to wait after a graceful stop before killing the program.",
          "format": "duration"
        },
        "stdout": {
          "type": "string"
        },
        "stderr": {
          "type": "string"
        },
        "env": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Environment variables to set before launching the program."
        }
      },
      "required": [
        "cmd",
        "numprocs"
      ],
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
